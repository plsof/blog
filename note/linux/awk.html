<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Awk | plsof</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/assets/img/favicon.ico">
    <meta name="description" content="Vuepress blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.dab10465.css" as="style"><link rel="preload" href="/blog/assets/js/app.88086388.js" as="script"><link rel="preload" href="/blog/assets/js/2.49a236d9.js" as="script"><link rel="preload" href="/blog/assets/js/65.071e002b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.2757765f.js"><link rel="prefetch" href="/blog/assets/js/11.5839dede.js"><link rel="prefetch" href="/blog/assets/js/12.a8947560.js"><link rel="prefetch" href="/blog/assets/js/13.a0ba02e9.js"><link rel="prefetch" href="/blog/assets/js/14.e2f92b4b.js"><link rel="prefetch" href="/blog/assets/js/15.b48fa565.js"><link rel="prefetch" href="/blog/assets/js/16.b81700c6.js"><link rel="prefetch" href="/blog/assets/js/17.b1c707d0.js"><link rel="prefetch" href="/blog/assets/js/18.5eef7a22.js"><link rel="prefetch" href="/blog/assets/js/19.520437c4.js"><link rel="prefetch" href="/blog/assets/js/20.d9d202f0.js"><link rel="prefetch" href="/blog/assets/js/21.cb138f89.js"><link rel="prefetch" href="/blog/assets/js/22.9785cf36.js"><link rel="prefetch" href="/blog/assets/js/23.7b46bea8.js"><link rel="prefetch" href="/blog/assets/js/24.4d3fedb1.js"><link rel="prefetch" href="/blog/assets/js/25.886bae34.js"><link rel="prefetch" href="/blog/assets/js/26.ed77c345.js"><link rel="prefetch" href="/blog/assets/js/27.bdbc11e8.js"><link rel="prefetch" href="/blog/assets/js/28.e10fadf3.js"><link rel="prefetch" href="/blog/assets/js/29.dda59d92.js"><link rel="prefetch" href="/blog/assets/js/3.f658113e.js"><link rel="prefetch" href="/blog/assets/js/30.d689903e.js"><link rel="prefetch" href="/blog/assets/js/31.aef48960.js"><link rel="prefetch" href="/blog/assets/js/32.12d3d2fc.js"><link rel="prefetch" href="/blog/assets/js/33.4cc9b4d7.js"><link rel="prefetch" href="/blog/assets/js/34.e2e313b7.js"><link rel="prefetch" href="/blog/assets/js/35.c5b27b66.js"><link rel="prefetch" href="/blog/assets/js/36.c5c32567.js"><link rel="prefetch" href="/blog/assets/js/37.dbdaccf3.js"><link rel="prefetch" href="/blog/assets/js/38.d63f78f3.js"><link rel="prefetch" href="/blog/assets/js/39.c09e93e4.js"><link rel="prefetch" href="/blog/assets/js/4.95d7177c.js"><link rel="prefetch" href="/blog/assets/js/40.d21e0571.js"><link rel="prefetch" href="/blog/assets/js/41.308ba400.js"><link rel="prefetch" href="/blog/assets/js/42.7a51c716.js"><link rel="prefetch" href="/blog/assets/js/43.7d849dfb.js"><link rel="prefetch" href="/blog/assets/js/44.9242de2f.js"><link rel="prefetch" href="/blog/assets/js/45.c5b4a02c.js"><link rel="prefetch" href="/blog/assets/js/46.57f62cd6.js"><link rel="prefetch" href="/blog/assets/js/47.d8881a46.js"><link rel="prefetch" href="/blog/assets/js/48.a8ce35d6.js"><link rel="prefetch" href="/blog/assets/js/49.cfb56ea8.js"><link rel="prefetch" href="/blog/assets/js/5.b4edcf13.js"><link rel="prefetch" href="/blog/assets/js/50.5102c797.js"><link rel="prefetch" href="/blog/assets/js/51.985f331b.js"><link rel="prefetch" href="/blog/assets/js/52.2c5b2d65.js"><link rel="prefetch" href="/blog/assets/js/53.91ad6526.js"><link rel="prefetch" href="/blog/assets/js/54.df415473.js"><link rel="prefetch" href="/blog/assets/js/55.6597a04e.js"><link rel="prefetch" href="/blog/assets/js/56.f09e9bf7.js"><link rel="prefetch" href="/blog/assets/js/57.73dec97d.js"><link rel="prefetch" href="/blog/assets/js/58.6c6da79c.js"><link rel="prefetch" href="/blog/assets/js/59.129c9d37.js"><link rel="prefetch" href="/blog/assets/js/6.b73564f2.js"><link rel="prefetch" href="/blog/assets/js/60.c3e19ee6.js"><link rel="prefetch" href="/blog/assets/js/61.99a0272f.js"><link rel="prefetch" href="/blog/assets/js/62.8e7648bc.js"><link rel="prefetch" href="/blog/assets/js/63.bc3cac30.js"><link rel="prefetch" href="/blog/assets/js/64.b112247d.js"><link rel="prefetch" href="/blog/assets/js/66.006dc1f0.js"><link rel="prefetch" href="/blog/assets/js/67.a2b507c8.js"><link rel="prefetch" href="/blog/assets/js/68.b0d7cf22.js"><link rel="prefetch" href="/blog/assets/js/69.4ee86054.js"><link rel="prefetch" href="/blog/assets/js/7.50844ffb.js"><link rel="prefetch" href="/blog/assets/js/70.dc7beda1.js"><link rel="prefetch" href="/blog/assets/js/71.ce7db99a.js"><link rel="prefetch" href="/blog/assets/js/72.047b9fa4.js"><link rel="prefetch" href="/blog/assets/js/73.9d07e8c8.js"><link rel="prefetch" href="/blog/assets/js/74.53e33484.js"><link rel="prefetch" href="/blog/assets/js/75.231d43d3.js"><link rel="prefetch" href="/blog/assets/js/8.fad53de1.js"><link rel="prefetch" href="/blog/assets/js/9.1f23426f.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.dab10465.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/sheep.png" alt="plsof" class="logo"> <span class="site-name can-hide">plsof</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/linux/awk.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  awk
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/linux/date.html" class="nav-link">
  date
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><span class="title">Python</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/python/datatypes/" class="nav-link">
  数据类型
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/function/" class="nav-link">
  函数
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/oop/" class="nav-link">
  面向对象
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/log/" class="nav-link">
  日志
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/network/" class="nav-link">
  网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow down"></span></button> <button type="button" aria-label="Golang" class="mobile-dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/go/basic/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/go/gin/" class="nav-link">
  gin
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/go/gorm/" class="nav-link">
  gorm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/frontend/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/frontend/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/frontend/vue/" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/db/etcd/" class="nav-link">
  etcd
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/db/redis/" class="nav-link">
  redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云原生" class="dropdown-title"><span class="title">云原生</span> <span class="arrow down"></span></button> <button type="button" aria-label="云原生" class="mobile-dropdown-title"><span class="title">云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/docker-compose/" class="nav-link">
  docker-compose
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/kubernetes/" class="nav-link">
  kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/harbor/" class="nav-link">
  harbor
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="监控" class="dropdown-title"><span class="title">监控</span> <span class="arrow down"></span></button> <button type="button" aria-label="监控" class="mobile-dropdown-title"><span class="title">监控</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/monitor/prometheus/" class="nav-link">
  prometheus
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="配置管理" class="dropdown-title"><span class="title">配置管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="配置管理" class="mobile-dropdown-title"><span class="title">配置管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/configuration-management/confd/" class="nav-link">
  confd
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/configuration-management/saltstack/" class="nav-link">
  saltstack
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/plsof" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><span class="title">Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="Linux" class="mobile-dropdown-title"><span class="title">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/linux/awk.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  awk
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/linux/date.html" class="nav-link">
  date
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><span class="title">Python</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/python/datatypes/" class="nav-link">
  数据类型
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/function/" class="nav-link">
  函数
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/oop/" class="nav-link">
  面向对象
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/log/" class="nav-link">
  日志
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/python/network/" class="nav-link">
  网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow down"></span></button> <button type="button" aria-label="Golang" class="mobile-dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/go/basic/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/go/gin/" class="nav-link">
  gin
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/go/gorm/" class="nav-link">
  gorm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/frontend/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/frontend/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/frontend/vue/" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/db/etcd/" class="nav-link">
  etcd
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/db/redis/" class="nav-link">
  redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云原生" class="dropdown-title"><span class="title">云原生</span> <span class="arrow down"></span></button> <button type="button" aria-label="云原生" class="mobile-dropdown-title"><span class="title">云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/docker-compose/" class="nav-link">
  docker-compose
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/kubernetes/" class="nav-link">
  kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/cloud-native/harbor/" class="nav-link">
  harbor
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="监控" class="dropdown-title"><span class="title">监控</span> <span class="arrow down"></span></button> <button type="button" aria-label="监控" class="mobile-dropdown-title"><span class="title">监控</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/monitor/prometheus/" class="nav-link">
  prometheus
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="配置管理" class="dropdown-title"><span class="title">配置管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="配置管理" class="mobile-dropdown-title"><span class="title">配置管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/note/configuration-management/confd/" class="nav-link">
  confd
</a></li><li class="dropdown-item"><!----> <a href="/blog/note/configuration-management/saltstack/" class="nav-link">
  saltstack
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/plsof" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/note/linux/awk.html" aria-current="page" class="active sidebar-link">Awk</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#分隔符" class="sidebar-link">分隔符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#fs" class="sidebar-link">FS</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#ofs" class="sidebar-link">OFS</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#rs" class="sidebar-link">RS</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#ors" class="sidebar-link">ORS</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#条件判断" class="sidebar-link">条件判断</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#变量传值" class="sidebar-link">变量传值</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#类型转换" class="sidebar-link">类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#字符串-整数" class="sidebar-link">字符串 -&gt; 整数</a></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#整数-字符串" class="sidebar-link">整数 -&gt; 字符串</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#内置函数" class="sidebar-link">内置函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/linux/awk.html#split" class="sidebar-link">split</a></li></ul></li></ul></li><li><a href="/blog/note/linux/date.html" class="sidebar-link">date</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="分隔符"><a href="#分隔符" class="header-anchor">#</a> 分隔符</h2> <h3 id="fs"><a href="#fs" class="header-anchor">#</a> FS</h3> <p>The input field separator, a space by default 字段分隔符</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN{FS=&quot;:&quot;}{print $1,$2,$3,$4,$5}' /etc/passwd</span>
mail x <span class="token number">8</span> <span class="token number">12</span> mail
uucp x <span class="token number">10</span> <span class="token number">14</span> uucp
operator x <span class="token number">11</span> <span class="token number">0</span> operator
games x <span class="token number">12</span> <span class="token number">100</span> games
gopher x <span class="token number">13</span> <span class="token number">30</span> gopher
<span class="token function">ftp</span> x <span class="token number">14</span> <span class="token number">50</span> FTP User
</code></pre></div><h4 id="指定多个fs-空格-多个空格"><a href="#指定多个fs-空格-多个空格" class="header-anchor">#</a> 指定多个FS(空格，多个空格，：，#，？)</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -F '[ ]+|[:#?]' '{print $1,$2,$3,$4,$5,$6,$7}' /etc/passwd</span>
mail x <span class="token number">8</span> <span class="token number">12</span> mail /var/spool/mail /sbin/nologin
uucp x <span class="token number">10</span> <span class="token number">14</span> uucp /var/spool/uucp /sbin/nologin
operatorx <span class="token number">11</span> <span class="token number">0</span> operator /root /sbin/nologin
games x <span class="token number">12</span> <span class="token number">100</span> games /usr/games /sbin/nologin
gopher x <span class="token number">13</span> <span class="token number">30</span> gopher /var/gopher /sbin/nologin
</code></pre></div><h3 id="ofs"><a href="#ofs" class="header-anchor">#</a> OFS</h3> <p>The output field separator, a space by default 输出字段分隔符</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN{FS=&quot;:&quot;;OFS=&quot;#&quot;}{print $1,$2,$3,$4,$5}' /etc/passwd</span>
mail<span class="token comment">#x#8#12#mail</span>
uucp<span class="token comment">#x#10#14#uucp</span>
operator<span class="token comment">#x#11#0#operator</span>
games<span class="token comment">#x#12#100#games</span>
gopher<span class="token comment">#x#13#30#gopher</span>
<span class="token function">ftp</span><span class="token comment">#x#14#50#FTP User</span>
</code></pre></div><h3 id="rs"><a href="#rs" class="header-anchor">#</a> RS</h3> <p>The input record separator, by default a newline 记录分隔符</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN{RS=&quot;:&quot;}{print $0}' /etc/passwd</span>
mail
x
<span class="token number">8</span>
<span class="token number">12</span>
mail
/var/spool/mail
/sbin/nologin
uucp
x
<span class="token number">10</span>
<span class="token number">14</span>
uucp
/var/spool/uucp
/sbin/nologin
operator
x
<span class="token number">11</span>
<span class="token number">0</span>
operator
/root
/sbin/nologin
games
</code></pre></div><h3 id="ors"><a href="#ors" class="header-anchor">#</a> ORS</h3> <p>The output record separator, by default a newline 输出记录分隔符</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN{FS=&quot;:&quot;;ORS=&quot;#&quot;}{print $0}' /etc/passwd</span>
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin<span class="token comment">#uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin#operator:x:11:0:operator:/root:/sbin/nologin#games:x:12:100:games:/usr/games:/sbin/nologin#gopher:x:13:30:gopher:/var/gopher:/sbin/nologin#ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin#</span>
</code></pre></div><h2 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h2> <h4 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">80.80</span>.80.67 - - <span class="token punctuation">[</span><span class="token number">2019</span>-10-29T00:01:01+08:00<span class="token punctuation">]</span> <span class="token string">&quot;GET /ysten-lvoms-epg/epg/getChannelNextProgram.shtml?uuid=cctv-14&amp;curprogramId=175430298&amp;programName=%E5%8A%A8%E7%94%BB%E5%A4%A7%E6%94%BE%E6%98%A0:%E5%96%80%E6%96%AF%E7%89%B9%E7%A5%9E%E5%A5%87%E4%B9%8B%E6%97%85&amp;startTime=1572220920&amp;action=next&amp;templateId=02850&amp;deviceGroupId=556&amp;districtCode=510600&amp;random=0.23766797524876893 HTTP/1.1&quot;</span>  <span class="token string">&quot;200&quot;</span> <span class="token number">149</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;http://jtdsepg.cdzgys.cn/watchTV2.0/watchTV11.0/index.html?businessType=livereplay&amp;mediaType=live&amp;fromwhere=playback&amp;templateId=02850&amp;catgId=ysten-cctv-1&amp;userId=25539939&quot;</span>  <span class="token string">&quot;gefo5(ysten)&quot;</span> - <span class="token string">&quot;0.000&quot;</span>  <span class="token string">&quot;looktvepg.sc.ysten.com&quot;</span> <span class="token string">&quot;7070&quot;</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;HIT&quot;</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;-&quot;</span>
<span class="token number">80.80</span>.80.40 - - <span class="token punctuation">[</span><span class="token number">2019</span>-10-29T00:01:01+08:00<span class="token punctuation">]</span> <span class="token string">&quot;GET /ysten-lvoms-epg/epg/getChannelNextProgram.shtml?uuid=cctv-6&amp;curprogramId=175106624&amp;programName=%E7%AC%91%E5%82%B2%E6%B1%9F%E6%B9%96&amp;startTime=1572185700&amp;action=next&amp;templateId=0286&amp;deviceGroupId=821&amp;districtCode=510100&amp;random=0.8053548543248326 HTTP/1.1&quot;</span>  <span class="token string">&quot;200&quot;</span> <span class="token number">135</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;http://jtdsepg.cdzgys.cn/watchTV2.0/watchTV11.0/index.html?businessType=livereplay&amp;mediaType=live&amp;fromwhere=playback&amp;templateId=0286&amp;catgId=ysten-cctv-1&amp;userId=25690871&quot;</span>  <span class="token string">&quot;gefo5(ysten)&quot;</span> - <span class="token string">&quot;0.000&quot;</span>  <span class="token string">&quot;looktvepg.sc.ysten.com&quot;</span> <span class="token string">&quot;7070&quot;</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;HIT&quot;</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;-&quot;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -F &quot;[ ]+|?&quot; '{a[$12]++;n++}END{for(i in a)print i,a[i],a[i]/n}' looktvepg.access.log20191029 | sort -n -r -k2</span>
</code></pre></div><h2 id="条件判断"><a href="#条件判断" class="header-anchor">#</a> 条件判断</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">awk</span> <span class="token string">'$4&gt;=&quot;[2019-10-28T01:00:00+08:00]&quot; &amp;&amp; $4&lt;&quot;[2019-10-28T03:00:00+08:00]&quot; {print}'</span> looktvepg.access.log20191029
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#2017/07/05 @pdd</span>
<span class="token comment"># egrep &quot;015164026490197|015164026498133|015164026498581|015164026496744|015164026495932|015373001004176&quot; /nginxlogs/tms.access.log</span>

<span class="token assign-left variable">LOG</span><span class="token operator">=</span><span class="token string">&quot;/nginxlogs/tms.access.log&quot;</span>

<span class="token assign-left variable">MIN</span><span class="token operator">=</span><span class="token variable">$1</span>

<span class="token comment"># minutes must great than 30</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -n <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> -gt <span class="token number">30</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token assign-left variable">PRETIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -d <span class="token string">&quot;-<span class="token variable">$1</span> min&quot;</span> <span class="token string">&quot;+%Y-%m-%dT%T&quot;</span><span class="token variable">)</span></span>
<span class="token keyword">else</span>
    <span class="token assign-left variable">PRETIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -d <span class="token string">&quot;-30 min&quot;</span> <span class="token string">&quot;+%Y-%m-%dT%T&quot;</span><span class="token variable">)</span></span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">TIME</span><span class="token operator">=</span><span class="token string">&quot;[&quot;</span><span class="token variable">${PRETIME}</span><span class="token string">&quot;+08:00]&quot;</span>

<span class="token comment"># 时间 HTTP状态码 串号 节点</span>
<span class="token function">awk</span> -v <span class="token assign-left variable">actime</span><span class="token operator">=</span><span class="token variable">$TIME</span> <span class="token string">'$4 &gt;= actime {print $4,$8,substr($12,2,15),$15}'</span> <span class="token variable">$LOG</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{if($3==015164026498581) print &quot;A在线&quot;,$0; else if($3==015164026490197) print &quot;B在线&quot;; else if($3==015373001004176) print &quot;C在线&quot;,$0}'</span>
</code></pre></div><h2 id="变量传值"><a href="#变量传值" class="header-anchor">#</a> 变量传值</h2> <h4 id="每分钟的请求占比"><a href="#每分钟的请求占比" class="header-anchor">#</a> 每分钟的请求占比</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">20</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">ptime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">&quot;<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> minute 20191001 0950&quot;</span> <span class="token string">&quot;+[%Y-%m-%dT%H:%M:%S+08:00]&quot;</span><span class="token variable">`</span></span>
    <span class="token assign-left variable">ntime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">&quot;<span class="token variable"><span class="token variable">$((</span>$i<span class="token variable">))</span></span> minute 20191001 0950&quot;</span> <span class="token string">&quot;+[%Y-%m-%dT%H:%M:%S+08:00]&quot;</span><span class="token variable">`</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$ptime</span> - <span class="token variable">$ntime</span>&quot;</span>
    <span class="token function">awk</span> -v <span class="token assign-left variable">ptime</span><span class="token operator">=</span><span class="token variable">$ptime</span> -v <span class="token assign-left variable">ntime</span><span class="token operator">=</span><span class="token variable">$ntime</span> <span class="token string">'$4 &gt;=ptime &amp;&amp; $4&lt;ntime {a[$NF]++;n++} END{for(i in a)print i,a[i]/n*100&quot;%&quot;;print &quot;一分钟总行数&quot;n}'</span> looktvepg.access.log20191001
    <span class="token builtin class-name">echo</span>
<span class="token keyword">done</span>
</code></pre></div><h4 id="每十秒的访问量"><a href="#每十秒的访问量" class="header-anchor">#</a> 每十秒的访问量</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">0</span> <span class="token number">16</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">ptime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">&quot;<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">*</span><span class="token number">10</span><span class="token variable">))</span></span> seconds 20191106 01:03&quot;</span> <span class="token string">&quot;+[%Y-%m-%dT%H:%M:%S+08:00]&quot;</span><span class="token variable">`</span></span>
    <span class="token assign-left variable">ntime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">&quot;<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">9</span><span class="token variable">))</span></span> seconds 20191106 01:03&quot;</span> <span class="token string">&quot;+[%Y-%m-%dT%H:%M:%S+08:00]&quot;</span><span class="token variable">`</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$ptime</span> - <span class="token variable">$ntime</span>&quot;</span>
    <span class="token function">grep</span> getChannelNextProgram looktvepg.access.log <span class="token operator">|</span> <span class="token function">grep</span> ysten-cctv-5 <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">ptime</span><span class="token operator">=</span><span class="token variable">$ptime</span> -v <span class="token assign-left variable">ntime</span><span class="token operator">=</span><span class="token variable">$ntime</span> <span class="token string">'$4 &gt;=ptime &amp;&amp; $4&lt;=ntime {n++} END{print &quot;cctv5出现次数 &quot;, n}'</span>
<span class="token keyword">done</span>
</code></pre></div><h2 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h2> <h3 id="字符串-整数"><a href="#字符串-整数" class="header-anchor">#</a> 字符串 -&gt; 整数</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;&quot; | awk '{a=&quot;asd&quot;;a+0;print a}'</span>
asd
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;&quot; | awk '{a=&quot;asd123&quot;;a+0;print a}'</span>
asd123
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;&quot; | awk '{a=&quot;\&quot;123\&quot;&quot;;a+0;print a}'</span>
<span class="token string">&quot;123&quot;</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;&quot; | awk '{a=&quot;123&quot;;a+0;print a}'</span>
<span class="token number">123</span>
</code></pre></div><h3 id="整数-字符串"><a href="#整数-字符串" class="header-anchor">#</a> 整数 -&gt; 字符串</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;&quot; | awk 'BEGIN{a=100;b=100;c=(a&quot;&quot;b);print c}'</span>
</code></pre></div><h2 id="内置函数"><a href="#内置函数" class="header-anchor">#</a> 内置函数</h2> <h3 id="split"><a href="#split" class="header-anchor">#</a> split</h3> <p><code>日志</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">80.80</span>.80.112 - - <span class="token punctuation">[</span><span class="token number">2020</span>-03-06T00:01:02+08:00<span class="token punctuation">]</span> <span class="token string">&quot;GET /local/common/tp8/watchTV_U/images/player/key/btn_11.png HTTP/1.1&quot;</span>  <span class="token string">&quot;304&quot;</span> <span class="token number">0</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;http://jtdsepg.cdzgys.cn/local/common/tp8/watchTV_U/index.html?templateId=02867&amp;catgId=ysten-cctv-1&amp;businessType=livereplay&amp;mediaType=live&amp;fromwhere=playback&amp;userId=143643005&amp;source=4&amp;fromChannel=panel&amp;platformId=2&quot;</span>  <span class="token string">&quot;gefo8(ysten) va2d&quot;</span> - <span class="token string">&quot;0.000&quot;</span>  <span class="token string">&quot;jtdsepg.cdzgys.cn&quot;</span> <span class="token string">&quot;80&quot;</span> <span class="token string">&quot;-&quot;</span> <span class="token string">&quot;-&quot;</span>
</code></pre></div><p><code>统计request_time &gt; 9s的占比</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">awk</span> <span class="token string">'{split($(NF-4),a,&quot;\&quot;&quot;);if(a[2]&gt;9) i++}END{print i,i/NR}'</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/note/linux/date.html">
        date
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.88086388.js" defer></script><script src="/blog/assets/js/2.49a236d9.js" defer></script><script src="/blog/assets/js/65.071e002b.js" defer></script>
  </body>
</html>
